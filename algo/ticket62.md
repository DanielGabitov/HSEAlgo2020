## Билет 62
Автор: Габитов Даниил

### Общие идеи: BST и неявный ключ.

Давайте из BST сделаем массив. Тогда научимся делать add и delete из середины массива за log. Обычные операции с массивом тоже работают за log. *No pain no gain*

Как получить по индексу элемент? Будем хранить для каждой вершины размер ее поддерева. Это свойство легко пересчитывается. Начнем спускаться с корня, если индекс <= v->l->get_size() пойдем в лево, если индекс == v->l->get_size() + 1, то v и есть искомая вершина, иначе, если индекс > v->l->get_size() + 1, то идем вправо, при этом уменьшив индекс на v->l->get_size() + 1.

Аналогично можно по элементу восстановить индекс.

Тогда del и add реализуются через IndexOf().

### Общие идеи: персистентность.

Хотим при изменении дерева не терять предыдущую верисию. Тогда необходимо делать операции персистентыми. Самый простой способ добится этого - выполнять операции, как в BST, но при этом создавать копии вершин при подьеме наверх, строя как бы копию дерева, но уже измененную. Тогда после любой такой операции у нас появится еще один корень, который и будет являтся новой версией.
